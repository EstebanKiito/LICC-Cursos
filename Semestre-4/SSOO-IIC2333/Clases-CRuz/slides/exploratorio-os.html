<!DOCTYPE html><html lang="es"><head><!--[if IE]><!--Get a real browser!--><![endif]--><!--Do NOT read this file, the source is available--><meta charset="utf-8" /><title>Sistemas Operativos <br/> <div style="font-size:24px;">(o ¿Cómo funciona un computador?, parte II)</div></title><meta content="IIC2333 - Sistemas Operativos y Redes" name="description" /><meta name="author" /><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui" name="viewport" /><meta content="yes" name="apple-mobile-web-app-capable" /><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style" /><link href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.2.0/css/reveal.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.2.0/css/theme/white.min.css" id="theme" rel="stylesheet" /><link href="https://github.com/frederickf/presentable/raw/master/src/presentable.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.2.0/lib/css/zenburn.min.css" rel="stylesheet" /></head><body><div class="reveal"><div class="slides"><section><h2>Sistemas Operativos y Redes</h2><h1>Sistemas Operativos <br/> <div style="font-size:24px;">(o ¿Cómo funciona un computador?, parte II)</div></h1><p>Semestre 2022-1<br/>Cristian Ruz - cruz@ing.puc.cl</p><p style="padding-top:4em;">Departamento de Ciencia de la Computación<br/>Pontificia Universidad Católica de Chile</p></section><section><h2>¿Para qué un Sistema Operativo?</h2><section></section><section><div>¿Qué ocurre cuando interactuamos con el computador?</div></section><section><div>Queremos ejecutar un código como esto</div><img src="../images/figures/00-main.png" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="20%" /><div class="fragment" data-fragment-index="1" style="border:none; width:20%; vertical-align:middle; display:inline-block;">más bien esto</div><div class="fragment" data-fragment-index="1" style="border:none; width:30%; vertical-align:middle; display:inline-block;"><img src="../images/figures/00-compiled.png" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="70%" /></div><div><div class="fragment" data-fragment-index="2" style="border:none; width:30%; vertical-align:middle; display:inline-block; horizontal-align:right;">Y para eso tenemos:</div><div class="fragment" data-fragment-index="2" style="border:none; width:25%; vertical-align:middle; display:inline-block;"><img src="../images/figures/00-motherboard.jpg" style="background:none; border:none; box-shadow:none;" width="100%" /></div></div><div class="fragment" data-fragment-index="2" style="font-size:12px;">Source: https://www.soundonsound.com/techniques/installing-new-pc-motherboard</div></section><section><div style="border:none; width:50%; vertical-align:middle; display:inline-block;"><div style="border:none;horizontal-align:left;"><i>Hardware</i> ejecuta ciclos de instrucciones</div><ul style="font-size:28px;horizontal-align:left;"><li><i>Fetch</i></li><li><i>Decode</i></li><li><i>Execute</i></li></ul><br /><br /><div><i>Hardware</i> ejecuta programas (código) compilado</div><ul class="fragment" data-fragment-index="1" style="font-size:28px;"><li>¿Cuál programa? ¿En qué orden?</li><li>¿Un programa a la vez?</li><li>¿En qué región de memoria?</li><li>¿Cómo utiliza los dispositivos de I/O?</li></ul></div><img src="../images/figures/00-instructioncycle-opt.svg" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="20%" /></section><section><div>El computador es una máquina programable (léase "reconfigurable") &hellip;</div><div style="font-size:24px;">&hellip; pero electrónicamente compleja</div><div><img src="../images/figures/00-vonneumann-opt.svg" style="background:none; border:none; box-shadow:none;" width="35%" /></div><div class="fragment" data-fragment-index="1">Cuando ejecutamos un programa ...</div><ul class="fragment" data-fragment-index="1" style="font-size:24px;"><li>No nos preocupamos del <i>hardware</i> del computador</li><li>No tenemos que esperar que otro programa termine para que el nuestro ejecute</li><li>No especificamos qué región de la memoria va a utilizar</li><li>No decidimos en que bloques del disco está almacenado</li></ul><blockquote class="fragment" data-fragment-index="2" style="background:#B7E1CD;">Porque afortunadamente existe el <b>Sistema Operativo</b> &#x1f605;</blockquote><div class="fragment" data-fragment-index="2" style="font-size:18px;">Afortunadamente también tenemos compiladores, pero en este curso alabaremos al sistema operativo</div></section></section><section><h2>Estructura de un Sistema Operativo</h2><section></section><section data-background-image="../images/figures/00-os-list.png" data-background-size="50%"><div>¿Dónde vive el Sistema Operativo?</div><div style="border:none; width:60%; vertical-align:middle; display:inline-block;"><div class="fragment" data-fragment-index="1">Sistema Operativo <b>ES</b> <i>software</i></div><div class="fragment" data-fragment-index="1">Sistema Operativo <b>habla con</b> el <i>hardware</i></div><br /><div class="fragment" data-fragment-index="2">El <b>Sistema Operativo</b> es nuestro <b>servidor</b> más importante</div><ul class="fragment" data-fragment-index="3" style="font-size:36px;"><li>Nos <b>protege</b> de los detalles del <i>hardware</i></li><ul class="fragment" data-fragment-index="4" style="font-size:20px;"><li>¿Un core, dos core?, ¿4GB RAM?, ¿disco SSD?, &hellip; úselo no más, yo me encargo</li></ul><li>Nos permite <b>compartir recursos</b> con otros programas</li><ul class="fragment" data-fragment-index="4" style="font-size:20px;"><li>¿Quiere navegar, tocar música, jugar WoW, compilar su tarea, todo al mismo tiempo? No se preocupe</li></ul><li>Nos ofrece <b>servicios</b> para hacer más cómodo el uso del <i>hardware</i></li><ul class="fragment" data-fragment-index="4" style="font-size:20px;"><li>Escritura y lectura de disco, envío de mensajes por red, acceso a su pendrive USB, y todo eso &hellip; con una interfaz gráfica</li></ul></ul><blockquote class="fragment" data-fragment-index="5" style="background:#B7E1CD;">Nos permite <b>usar</b> el computador &#x1f603;</blockquote><div class="fragment" data-fragment-index="5" style="font-size:14px;">¿Como no querer/estudiar a nuestro sistema operativo?</div></div><div style="border:none; width:40%; vertical-align:middle; display:inline-block;"><img src="../images/figures/00-monkey-user.gif" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="50%" /><img src="../images/figures/00-oslayers-opt.svg" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="100%" /></div></section><section data-background-image="../images/figures/00-os-list.png" data-background-size="50%" data-transition="fade"><div>El sistema operativo es un <i>software</i> <b>complejo</b></div><div>¿Cómo se invocan los servicios del sistema operativo?</div><div style="border:none; width:60%; vertical-align:middle; display:inline-block;"><div style="text-align:left;">Sistema operativo provee una interfaz de <b>llamadas al sistema</b> (<i>syscalls</i>)</div><br /><ul style="font-size:24px;"><li>Cada vez que un programa desea solicitar algo al sistema operativo, debe invocar una <i>syscall</i></li><li>"Por favor, sistema operativo, haz esto por mi"</li><li>Cada sistema operativo puede proveer un conjunto distinto de <i>syscalls</i></li><li>Sistemas operativos proveen bibliotecas (<i>libraries</i>) en algún lenguaje de programación (C) para invocar <i>syscalls</i>.</li></ul></div><div style="border:none; width:40%; vertical-align:middle; display:inline-block;"><img src="../images/figures/00-oslayers3-opt.svg" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="100%" /></div><div>Sin embargo, cuando interactuamos con el computador no escribimos <i>syscalls</i></div></section><section data-background-image="../images/figures/00-os-list.png" data-background-size="50%" data-transition="fade"><div>El sistema operativo es un <i>software</i> <b>complejo</b></div><div>¿Cómo interactuamos con el sistema operativo?</div><div style="border:none; width:60%; vertical-align:middle; display:inline-block;"><div style="text-align:left;">Sistema operativo provee <b>interfaces de usuario</b> (<i>user interface</i>) que enmascara <i>syscalls</i></div><ul style="font-size:24px;"><li>Ofrecen un entorno más "amigable" para usar el computador</li><li>¿Son parte del sistema operativo?</li></ul><br /><div style="text-align:left;">Distintas maneras de interactuar con el sistema operativo</div><ul style="font-size:24px;"><li><b>Interfaces gráficas</b>: <b>GUI</b> (<i>Graphical User Interface</i>)</li><li><b>Intérprete de comandos</b> (<i>Command Line</i>)</li><li><b>Batch</b> (lotes): secuencias de comandos no-interactivas</li></ul></div><div style="border:none; width:40%; vertical-align:middle; display:inline-block;"><img src="../images/figures/00-oslayers4-opt.svg" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="100%" /></div></section><section data-background-image="../images/figures/00-os-list.png" data-background-size="50%" data-transition="fade"><div>El sistema operativo es un <i>software</i> <b>complejo</b></div><div>Interfaces gráficas: GUI</div><div style="border:none; width:60%; vertical-align:middle; display:inline-block;"><div style="text-align:left;">GUIs ofrecen un entorno basado en abstracciones (ventanas, punteros) para interactuar con el sistema operativo</div><img src="../images/figures/00-CDE.png" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="30%" /><img src="../images/figures/00-XFCE.png" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="30%" /><img src="../images/figures/00-tonystark.gif" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="30%" /><img src="../images/figures/00-KDE.png" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="30%" /><img src="../images/figures/00-windows-10.png" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="30%" /><img src="../images/figures/00-macosx.jpg" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="30%" /></div><div style="border:none; width:40%; vertical-align:middle; display:inline-block;"><img src="../images/figures/00-oslayers4-opt.svg" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="100%" /></div></section><section data-background-image="../images/figures/00-os-list.png" data-background-size="50%" data-transition="fade"><div>El sistema operativo es un <i>software</i> <b>complejo</b></div><div>Intérprete de comandos / linea de comandos / <i>command line</i></div><div style="font-size:12px;">menos preciso: <i>shell</i>, terminal, consola, xterm, prompt</div><div style="border:none; width:60%; vertical-align:middle; display:inline-block;"><div><ul><li>UNIX/Linux/MacOSX: <code>sh</code>, <code>csh</code>, <code>tcsh</code>, <code>ksh</code>, <code>bash</code>, <code>zsh</code></li><li>MS-DOS/Windows: <code>COMMAND.COM</code>, <code>cmd.exe</code>, PowerShell</li></ul></div><div><img src="../images/figures/00-bash.png" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="30%" /><img src="../images/figures/00-hacker-console.gif" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="30%" /><img src="../images/figures/00-zsh.png" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="30%" /><img src="../images/figures/00-commandcom.jpg" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="40%" /><img src="../images/figures/00-powershell.png" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="40%" /></div></div><div style="border:none; width:40%; vertical-align:middle; display:inline-block;"><img src="../images/figures/00-oslayers4-opt.svg" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="100%" /></div></section><section data-background-image="../images/figures/00-os-list.png" data-background-size="50%" data-transition="fade"><div>El sistema operativo es un <i>software</i> <b>complejo</b></div><div style="border:none; width:60%; vertical-align:middle; display:inline-block;"><blockquote style="background: #F4C7C3;">El <b>kernel</b> (núcleo, supervisor)</blockquote><div style="text-align:left;">El código fundamental del sistema operativo.</div><ul style="font-size:24px;"><li>Es <i>software</i></li><li>Suele ser lo más pequeño posible (o no)</li></ul><div style="text-align:left;">Tiene completo control sobre el sistema (<i>hardware</i>)</div><ul style="font-size:24px;"><li>Es el único programa que ejecuta en un <b>modo privilegiado</b></li><li>También conocido como <b>modo monitor</b>, <b>modo kernel</b>, <b>modo sistema</b></li><li>Todo lo que no es parte del <i>kernel</i>, ejecuta en <b>modo usuario</b></li></ul><div style="text-align:left;">Sistema operativo incluye herramientas (programas) que facilitan la labor del kernel, pero que no son fundamentales</div></div><div style="border:none; width:40%; vertical-align:middle; display:inline-block;"><img src="../images/figures/00-oslayers5-opt.svg" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="100%" /></div><blockquote class="fragment" style="background: #B7E1CD;">Sistema Operativo = Kernel + Programas del Sistema</blockquote></section></section><section><h2>¿Cómo funciona el Sistema Operativo?</h2><section></section><section data-transition="fade"><h3>Interrupciones</h3><blockquote style="background: #F4C7C3;">Los Sistemas Operativos son manejados por <b>interrupciones</b> / <b>traps</b>.</blockquote><div style="text-align:center;">Mientras nadie lo llame, el sistema operativo no hace nada.</div><ul style="font-size:28px;"><li>Programa de usuario genera un <i>trap</i>: interrupción generada por software</li><li>Control pasa al sistema operativo: <i>kernel space</i></li><li>Sistema operativo ejecuta servicio solicitado por el usuario</li><li>Una vez terminado el servicio, sistema operativo regresa el control al programa de usuario</li></ul><div style="border:none; width:100%; vertical-align:middle; display:inline-block; text-align:center;"><img src="../images/figures/00-osinterrupt-opt.svg" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="50%" /></div></section></section><section><h2><i>Syscalls</i>: llamadas al sistema</h2><section></section><section data-transition="fade"><div style="text-align:center;">Interfaz para solicitar servicios al sistema operativo</div><ul style="font-size:28px;"><li>Manera precisa de llamar al sistema operativo es altamente dependiente del <i>hardware</i></li><li>Sistemas proveen bibliotecas que implementan <i>syscalls</i></li></ul><br /><br /><div style="border:none; width:100%; vertical-align:middle; display:inline-block; text-align:center;"><img src="../images/figures/00-ossyscalls-opt.svg" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="50%" /></div></section><section data-transition="fade"><div>¿Qué hace el sistema operativo ante el siguiente comando?</div><div><code>copy source.txt dest.txt</code></div><br /><div style="border:none; width:55%; vertical-align:middle; display:inline-block; text-align:left;"><ul class="fragment" style="font-size:28px;"><li>Abrir <code>source.txt</code> (<code>stat</code>, <code>open</code>)</li><ul><li style="font-size:20px;">¿existe?, ¿tiene permiso de lectura?, &hellip;</li></ul><li>Abrir <code>dest.txt</code> (<code>stat</code>, <code>open</code>)</li><ul><li style="font-size:20px;">¿existe?, ¿se reemplaza?, ¿se puede escribir?, &hellip;</li></ul><li>Leer <code>source.txt</code> hacia alguna región de memoria (<code>mmap</code>, <code>read</code>)</li><li>Escribir desde la memoria hacia <code>dest.txt</code> (<code>write</code>)</li><li>Liberar la memoria y guardar los archivos (<code>munmap</code>, <code>close</code>)</li></ul><br /><br /></div><div style="border:none; width:45%; vertical-align:middle; display:inline-block; text-align:left;"><img src="../images/figures/00-ossyscalls2-opt.svg" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="100%" /></div><div class="fragment"><div>Todas estas acciones requieren llamadas al sistema</div><br /><div>Pruebe con: <code>strace cp source.txt dest.txt</code></div></div></section></section><section><h2>Procesos</h2><section></section><section><div>Composición: ¿Qué hay en un Proceso?</div><div style="border:none; width:60%; vertical-align:middle; display:inline-block;"><ul style="font-size:28px;"><li><b>Código</b> (<code>.text</code>, información estática)</li><li><b>Datos</b> (<code>.data</code>): variables globales</li><li><b>Stack</b>. Cada item del stack representa un llamado a función (<i>call frame</i>), y contiene:</li><ul><li>Parámetros</li><li>Variables locales</li><li>Lugar de retorno (donde estaba la ejecución anterior, PC)</li></ul><li><b>Heap</b>. Memoria asignada dinámicamente (durante la ejecución)</li></ul></div><div style="border:none; width:40%; vertical-align:middle; display:inline-block;"><img src="../images/figures/01-proc-internals-proc1-opt.svg" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="100%" /></div></section><section id="repr"><div>Representación: ¿Cómo lo ve el Sistema Operativo?</div><blockquote style="background:#F4C7C3;"><b>Process Control Block (PCB)</b></blockquote><div style="border:none; width:65%; vertical-align:middle; display:inline-block;"><div>Sistema Operativo mantiene <b>Tabla de Procesos</b>.</div><div>Información de cada procesos almacenada en su PCB</div><ul class="fragment" style="font-size:28px;"><li>Estado</li><li>Identificador (PID, <i>Process ID</i>)</li><li>Program Counter (PC)</li><li>Registros de CPU: <em>estado de ejecución</em></li><li>Información de <em>scheduling</em>: prioridades, tipo de cola, &hellip;</li><li>Información de memoria: límites, tabla de páginas/segmentos, &hellip;</li><li>Contabilidad (<em>accounting</em>)</li><li>Información de I/O: archivos y dispositivos abiertos, &hellip;</li></ul><div class="fragment">PCB pueden tener mucha información. Miremos en <a href="https://github.com/torvalds/linux/blob/master/include/linux/sched.h" target="_blank"><code>include/linux/sched.h</code></a></div></div><div style="border:none; width:35%; vertical-align:middle; display:inline-block;"><img src="../images/figures/01-proc-internals-pcb-opt.svg" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="100%" /></div></section><section id="states-inside"><div>Un proceso en ejecución puede cambiar de estado</div><ul><li><b>New       </b>: En creación</li><li><b>Running   </b>: En ejecución</li><li><b>Waiting   </b>: Esperando (I/O, signal)</li><li><b>Ready     </b>: Listo para ejecutar. Esperando asignación de CPU</li><li><b>Terminated</b>: Ejecución terminada</li></ul><img src="../images/figures/01-proc-states-opt.svg" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="75%" /></section></section><section id="scheduling"><h2>Scheduling</h2><section id="scheduling-init"><p><i>CPU Scheduling</i> a.k.a. Planificación de CPU</p><div style="width:60%; vertical-align:middle; display:inline-block;"><div data-fragment-index="1">Tenemos:</div><ul class="fragment" data-fragment-index="1" style="font-size:28px;"><li>Múltiples procesos en memoria (<i>multiprogramación</i>), ordenados en una tabla de PCBs</li><li>Algunos procesos en estado <i>ready</i> (listos para ejecutar)</li><li>CPU que puede atender <b>solo un proceso</b> a la vez</li></ul><br /><br /><div class="fragment" data-fragment-index="2">Y queremos:</div><ul class="fragment" data-fragment-index="2" style="font-size:28px;"><li><b><i>Multitasking</i></b>: asignar tiempo a múltiples procesos</li></ul></div><div style="width:40%; vertical-align:middle; display:inline-block;"><img src="../images/figures/01-proc-internals-pcb-opt.svg" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="80%" /></div><blockquote class="fragment" style="background:#B7E1CD;">Sistema Operativo debe elegir cuál de todos los procesos en estado <b>ready</b> debe ejecutar a continuación: <b>scheduling</b></blockquote></section><section><div>Responsable: <b>scheduler</b>, a.k.a.  <i>planificador</i></div><div><em>Scheduling</em> puede ser visto como un sistema de <em>manejo de colas</em></div><img src="../images/figures/01-3_06.pdf.png" width="50%" style="border:none; box-shadow:none;" alt="01 3 06.pdf" /></section></section><section><h2>Memoria</h2><section id="memory0"><h3>Direcciones de Memoria</h3><div><ul><li>Un gran arreglo de <i>bytes</i></li><li>Cada uno con su propia <b>dirección</b></li></ul></div><div style="width:50%; vertical-align:middle; display:inline-block;"><div>Al principio &hellip;</div><img src="../images/figures/02-memory-old.png" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="40%" /></div><div class="fragment" style="width:50%; vertical-align:middle; display:inline-block;"><div>Con multiprogramación &hellip;</div><img src="../images/figures/02-memory-new.png" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="35%" /></div></section></section><section id="pagination"><h2>Paginación</h2><section><div>Problema: un espacio de direcciones muy grande.</div><ul><li>Idea 1: Dividir el espacio de direcciones en <b>segmentos</b></li><li class="fragment" data-fragment-index="1">Idea 2: Que los segmentos sean del mismo tamaño: <b>páginas de memoria</b></li></ul><blockquote class="fragment" data-fragment-index="2" style="background:#F4C7C3;"><b>Paginación</b></blockquote><div class="fragment" data-fragment-index="2" style="width:50%; vertical-align:middle; display:inline-block;"><ul><li>Espacio virtual: <b>páginas</b></li><li>Espacio físico: <i><b>frames</b></i> (marcos)</li><li>Páginas y <i>frames</i> del <b>mismo</b> tamaño</li></ul><br /><br /><div class="fragment" data-fragment-index="3">Sistema con 128B RAM</div><ul class="fragment" data-fragment-index="3"><li>Espacio virtual (lógico) de 64B.</li><li>Espacio físico de 128B.</li><li>Páginas (y <i>frames</i>) de 16B.</li></ul></div><div class="fragment" data-fragment-index="3" style="width:50%; vertical-align:middle; display:inline-block;"><img src="../images/figures/02-pages-1.png" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="50%" /><img src="../images/figures/02-pages-2.png" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="50%" /></div></section><section><blockquote style="background:#B7E1CD;"> <b>¿Cuántos accesos a memoria?</b></blockquote><div>Dirección de tabla de páginas se guarda en PCB, como <b>PageTableBaseRegister</b> (PTBR)</div><div class="fragment" data-fragment-index="2" style="width:55%; vertical-align:middle; display:inline-block;"><pre><code class="hljs lang-c"> VPN = (virtualAddress & VPN_MASK) >> VPN_SHIFT;
 PTEAddress = PageTableBaseRegister + (VPN * sizeof(PTE));
 PTE = ReadMemory(PTEAddress);

 // está en memoria
 if(!PTE.valid)
   raise(SEG_FAULT);
 // verificación de permisos
 else if(PTE.protected)       
   raise(PROTECTION_FAULT);
 // Acceso OK
 else {
   offset = virtualAddress & OFFSET_MASK;
   physicalAddress = (PTE.PFN << PFN_SHIFT) | offset;
   register = ReadMemory(physicalAddress);</code></pre></div><div class="fragment" data-fragment-index="2" style="width:45%; vertical-align:middle; display:inline-block;"><img src="../images/figures/02-8_10.pdf.png" style="background:none; border:none; box-shadow:none; vertical-align:middle;" width="100%" /></div></section></section><section><h2>Sistemas de Archivos</h2><section><h3>Archivos</h3><blockquote style="background:#B7E1CD;">Colección de información en almacenamiento secundario  </blockquote><ul class="fragment" style="text-align:left;"><li>Unidad mínima de almacenamiento para el usuario</li><li>Agrupación lógica de <i>bytes</i></li><li>Abstracción</li></ul><br /><br /><blockquote class="fragment" style="background:#B7E1CD;">Contenido: cualquier cosa</blockquote><ul class="fragment"><li>Significado está determinado por la forma en que se utiliza su contenido</li><li>Texto, imagen, código fuente, código binario (ejecutable), ...</li></ul></section><section><h3>Directorios</h3><div>Archivos se organizan en una estructura de <b>directorios</b> (otra abstracción)</div><div style="width:70%; vertical-align:middle; display:inline-block;"><ul><li>Nombre (low-level name): <i>inode number</i></li><li>Contiene lista de pares: (<i>readable name</i>, <i>low-level name</i>)</li><li>Puede contener otros directorios: <b>jerarquía</b> o <b>árbol de directorios</b></li><ul><li>Jerarquía empieza en una raíz: <b>root</b>, o <code>/</code></li><li>Usa un separador: <code>/</code></li><li>Unidades son <b>subdirectorios</b></li></ul><li>Nombres con subdirectorios: <b>pathname</b> o <b>ruta</b></li><ul><li>Ruta absoluta: <b>Absolute path</b></li><ul><li style="font-size:18px;"><code>/foo</code>, <code>/bar/bar</code>, <code>/bar/foo/bar.txt</code></li></ul><li>Ruta relativa: <b>Relative path</b></li><ul><li style="font-size:18px;"><code>foo</code>, <code>foo/bar.txt</code>, <code>foo/bar.txt</code></li></ul></ul><ul>Ruta absoluta no puede repetirse</ul></ul></div><div style="width:30%; vertical-align:middle; display:inline-block;"><img src="../images/figures/03-directory-tree.png" style="background:none; border:none; box-shadow:none;" width="100%" /></div></section><section><h3>Asignación contigua</h3><div style="width:70%; vertical-align:middle; display:inline-block;"><ul><li> Archivo de $n$ bloques: $b, b+1, \ldots b+n-1$</li><li> Fácil de acceder a siguiente bloque</li><li> -Problema: fragmentación externa</li><li> Require operaciones de <b>compactación</b> (defragmentación)</li></ul></div><div style="width:30%; vertical-align:middle; display:inline-block;"><img src="../images/figures/03-12_05.pdf.png" style="background:none; border:none; box-shadow:none;" width="100%" /></div></section><section><h3>Asignación enlazada (<i>linked</i>)</h3><div style="width:70%; vertical-align:middle; display:inline-block;"><ul><li> Almacena punteros a bloque siguiente</li><li> Ej: bloque de 512 bytes, solo puede guardar 508 bytes. Se pierde espacion.</li><li> No requiere tamaño inicial de archivo. Puede crecer.</li><li> -Acceso solo secuencial.</li><li> Alternativa: almacenar <i>clusters</i> de bloques en lugar de bloques individuales (frag. interna)</li><li> -Vulnerable a falla de un bloque</li></ul></div><div style="width:30%; vertical-align:middle; display:inline-block;"><img src="../images/figures/03-12_06.pdf.png" style="background:none; border:none; box-shadow:none;" width="100%" /></div></section><section><h3>Asignación enlazada (<i>linked</i>): FAT</h3><div style="width:70%; vertical-align:middle; display:inline-block;"><ul><li> FAT: <b>File Allocation Table</b></li><li> Tabla al inicio del disco con una entrada por archivo</li><li> Último cluster almacena EOF (<i>end-of-file</i>)</li><li> +Mejor acceso aleatorio</li><li> -Limitado por tamaño de tabla (para FAT32, 4GB por archivo)</li></ul></div><div style="width:30%; vertical-align:middle; display:inline-block;"><img src="../images/figures/03-12_07.pdf.png" style="background:none; border:none; box-shadow:none;" width="100%" /></div></section><section><h3>Asignación indexada</h3><div style="width:70%; vertical-align:middle; display:inline-block;"><ul><li> Archivos contienen <i>index block</i></li><li> <i>Index Block</i> contiene bloques del archivo</li><li> Último cluster almacena EOF (<i>end-of-file</i>)</li><li> +Acceso aleatorio sin frag. externa</li><li> Se pierde espacio por tamaño de <i>index block</i></li></ul></div><div style="width:30%; vertical-align:middle; display:inline-block;"><img src="../images/figures/03-12_08.pdf.png" style="background:none; border:none; box-shadow:none;" width="100%" /></div></section><section><h3>Asignación indexada: tamaño del <i>index block</i></h3><div style="width:70%; vertical-align:middle; display:inline-block;"><ul><li> <b>Esquema enlazado</b>: última entrada de <i>index block</i> apunta a otro <i>index block</i></li><li> <b>Índice multinivel</b>: similar a tablas de página multinivel</li><ul><li> Ej: blocks de 4KB, permiten 1024 punteros (de 32-bit)</li><li> Dos niveles permiten direccionar $1048576$ bloques $\to 4$GB</li></ul><li> <b>Esquema combinado</b>: primeros $p$ punteros son bloques directos, los siguientes apuntan a bloque de índice simple, los siguientes a bloque de índice doble, etc</li></ul></div><div style="width:30%; vertical-align:middle; display:inline-block;"><img src="../images/figures/03-12_09.pdf.png" style="background:none; border:none; box-shadow:none;" width="100%" /></div></section></section></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.2.0/lib/js/head.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.2.0/js/reveal.min.js"></script><script>// Full list of configuration options available at:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
    width: 1600,
    height: 900,

    controls: true,
    progress: true,
    history: true,
    center: true,

    transition: 'slide', // none/fade/slide/convex/concave/zoom

    math: {
        //mathjax: 'https://cdn.mathjax.org/mathjax/latest/MathJax.js',
        //Migrated. Check here: https://www.mathjax.org/cdn-shutting-down/
        mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js',
        // config: 'TeX-AMS_HTML-full'  // See http://docs.mathjax.org/en/latest/config-files.html
        config: 'TeX-AMS-MML_HTMLorMML'  // See http://docs.mathjax.org/en/latest/config-files.html
    },

    // Optional reveal.js plugins
    dependencies: [

        // Cross-browser shim that fully implements classList - https://github.com/eligrey/classList.js/
        { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.2.0/lib/js/classList.min.js', condition: function() { return !document.body.classList; } },

        // Markdown
        { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.2.0/plugin/markdown/marked.min.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.2.0/plugin/markdown/markdown.min.js', condition: function() { return !!document.querySelector( '[data-markdown]' );} },

        // Highlight <code>
        { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.2.0/plugin/highlight/highlight.min.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },

        // Mathjax
        { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.2.0/plugin/math/math.min.js', async: true },

        // Zoom
        { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.2.0/plugin/zoom-js/zoom.min.js', async: true },

        // Speaker Notes
        { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.2.0/plugin/notes/notes.min.js', async: true }

        // Title footer
        //{ src: '/js/plugin/title-footer/title-footer.js', async: true, callback: function() { title_footer.initialize(); } }
    ]
});</script></body></html>